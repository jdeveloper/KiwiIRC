<script type="text/javascript">
    // File picker plugin
    // Author: https://github.com/pepijndevos/
    
    (function () {
        var network = kiwi.components.Network();
        var control = kiwi.components.ControlInput();

        var $icon = $('<strong style="cursor:pointer; cursor: hand">B</strong>');
        var bold = false;

        $.fn.toggleClick=function(){
            var functions=arguments, iteration=0
            return this.click(function(){
                functions[iteration].apply(this,arguments)
                iteration= (iteration+1) %functions.length
            })
        }

        $input = $("#kiwi #controlbox textarea");

        $icon.toggleClick(function(){
            $input.css('font-weight', 'bold');
            $icon.parent().addClass('active');
            bold = true;
        },function(){
            $input.css('font-weight', '');
            $icon.parent().removeClass('active');
            bold = false;
        });

        control.addCommandDecorator(function(command){
            if(command.command == "msg" && bold && command.params[1]) {
                command.params[1] = '\x02'+command.params[1];
            }
        });

        control.addPluginIcon($icon);
    })();
</script>
